# Kitchen Flow API üç≥

![Status](https://img.shields.io/badge/status-ativo-success.svg)
![Java](https://img.shields.io/badge/Java-21-blue.svg)
![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.5.3-brightgreen.svg)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-15-blue.svg)
![License](https://img.shields.io/badge/license-MIT-blue.svg)

## üéØ **Minha Jornada com Este Projeto**

Ol√°! Sou o **Andreyrsy** e este √© meu primeiro projeto Spring Boot "de verdade". Quando comecei, mal sabia o que era um DTO ou como fazer relacionamentos entre entidades. Hoje, olhando para tr√°s, vejo o quanto aprendi e cresci como desenvolvedor.

Este projeto nasceu de uma necessidade real: **combater o desperd√≠cio de comida em restaurantes**. Quantas vezes voc√™ j√° viu comida estragando na geladeira porque ningu√©m sabia que estava pr√≥xima do vencimento? Pois √©, eu tamb√©m! 

O **Kitchen Flow** √© minha tentativa de resolver esse problema com tecnologia, criando uma API que monitora proativamente as datas de validade e ajuda restaurantes a saberem exatamente o que precisa ser consumido com urg√™ncia.

---

## üöÄ **O Que Este Projeto Me Ensinou**

### **üìö Conceitos que Dominei:**

**1. Arquitetura em Camadas**
- Aprendi que separar Controller ‚Üí Service ‚Üí Repository n√£o √© s√≥ "boa pr√°tica", √© **essencial** para manter c√≥digo limpo
- Descobri que cada camada tem sua responsabilidade espec√≠fica e n√£o deve "invadir" a outra

**2. Relacionamentos JPA (O Desafio!)**
- Confesso: no come√ßo, `@OneToMany` e `@ManyToOne` me confundiam muito
- Mas quando entendi que `Categoria (1) ‚Üí Produto (N) ‚Üí Lotes (N)`, tudo fez sentido!
- Aprendi que relacionamentos s√£o sobre **como os dados se conectam no mundo real**

**3. DTOs - A Grande Descoberta**
- No in√≠cio, retornava entidades direto do banco (erro cl√°ssico de iniciante!)
- Descobri que DTOs s√£o como "tradu√ß√µes" entre o que est√° no banco e o que o cliente precisa
- A convers√£o manual de entidade para DTO me ensinou muito sobre estrutura de dados

**4. Valida√ß√£o de Dados**
- `@NotBlank`, `@NotNull` - essas anota√ß√µes pequenas fazem uma diferen√ßa ENORME
- Aprendi que validar na entrada √© melhor que descobrir o erro depois

**5. Tratamento de Exce√ß√µes**
- Meu `GlobalExceptionHandler` foi um marco! 
- Antes, erros apareciam como stack traces gigantes
- Agora, retorno mensagens bonitas e estruturadas

**6. Logs Estruturados**
- Descobri que logs n√£o s√£o s√≥ `System.out.println()`
- SLF4J me ensinou a diferen√ßa entre `log.info()`, `log.error()` e `log.debug()`
- Agora consigo debugar problemas muito mais r√°pido

---

## üõ†Ô∏è **Tecnologias que Dominei**

### **Backend Stack:**
- **Java 21** - A linguagem que escolhi para minha carreira
- **Spring Boot 3.5.3** - O framework que me fez amar desenvolvimento web
- **Spring Data JPA** - Para persist√™ncia de dados (Hibernate por baixo)
- **PostgreSQL** - Banco relacional robusto para dados estruturados
- **Flyway** - Controle de vers√£o do banco (migra√ß√µes s√£o vida!)

### **Ferramentas que Me Ajudaram:**
- **Lombok** - Menos c√≥digo boilerplate = mais tempo para l√≥gica de neg√≥cio
- **Bean Validation** - Valida√ß√µes autom√°ticas e consistentes
- **Maven** - Gerenciamento de depend√™ncias (ainda estou aprendendo)

---

## üèóÔ∏è **Arquitetura do Projeto**

```
Cliente ‚Üí Controller ‚Üí Service ‚Üí Repository ‚Üí Banco de Dados
```

### **Minha Estrutura de Pacotes:**
```
dev.andreyrsy.kitchen.flow/
‚îú‚îÄ‚îÄ controller/     # Endpoints da API
‚îú‚îÄ‚îÄ service/       # L√≥gica de neg√≥cio
‚îú‚îÄ‚îÄ repository/    # Acesso aos dados
‚îú‚îÄ‚îÄ model/        # Entidades JPA
‚îú‚îÄ‚îÄ dto/          # Objetos de transfer√™ncia
‚îî‚îÄ‚îÄ exception/    # Tratamento global de erros
```

### **Relacionamentos que Implementei:**
```
Categoria (1) ‚Üê‚Üí (N) Produto (1) ‚Üê‚Üí (N) Lotes
```

**Por que essa estrutura?**
- Uma categoria pode ter v√°rios produtos (ex: "Latic√≠nios" tem leite, queijo, iogurte)
- Um produto pode ter v√°rios lotes (ex: "Leite" pode ter lotes de datas diferentes)
- Isso reflete a realidade de um restaurante!

---

## ‚ú® **Funcionalidades Implementadas**

### **üè∑Ô∏è Gest√£o de Categorias**
- ‚úÖ Criar, listar e deletar categorias
- ‚úÖ Valida√ß√£o de dados obrigat√≥rios
- ‚úÖ Tratamento de exce√ß√µes personalizado

### **üì¶ Gest√£o de Produtos**
- ‚úÖ CRUD completo com DTOs
- ‚úÖ Associa√ß√£o autom√°tica com categorias
- ‚úÖ Valida√ß√£o de campos obrigat√≥rios
- ‚úÖ Logs estruturados para debugging

### **üìã Gest√£o de Lotes**
- ‚úÖ Controle de quantidade por lote
- ‚úÖ Valida√ß√£o de datas (entrada vs validade)
- ‚úÖ Consumo inteligente de estoque
- ‚úÖ Convers√£o completa de entidade para DTO

### **üîç Sistema de Status de Validade**
- ‚úÖ C√°lculo autom√°tico baseado em dias restantes
- ‚úÖ Status: `NORMAL`, `ATENCAO`, `URGENTE`, `VENCIDO`
- ‚úÖ L√≥gica de neg√≥cio centralizada no service

---

## üéì **Desafios que Superei**

### **1. O Problema dos Relacionamentos**
**Desafio:** Entender como conectar Categoria ‚Üí Produto ‚Üí Lotes
**Solu√ß√£o:** Muitos testes, leitura da documenta√ß√£o do Hibernate, e principalmente: **pr√°tica!**

### **2. A Convers√£o Entidade ‚Üí DTO**
**Desafio:** No in√≠cio, retornava entidades direto do banco
**Solu√ß√£o:** Aprendi que DTOs s√£o "tradu√ß√µes" e implementei convers√£o manual completa

### **3. Tratamento de Exce√ß√µes**
**Desafio:** Stack traces gigantes e mensagens confusas
**Solu√ß√£o:** Implementei `GlobalExceptionHandler` com respostas estruturadas

### **4. Valida√ß√£o de Dados**
**Desafio:** Como garantir que dados v√°lidos entrem no sistema?
**Solu√ß√£o:** Bean Validation com `@NotBlank`, `@NotNull` e mensagens personalizadas

### **5. Logs Estruturados**
**Desafio:** Debugging era um pesadelo
**Solu√ß√£o:** SLF4J com logs informativos e contexto rico

---

## üöÄ **Como Executar o Projeto**

### **Pr√©-requisitos:**
- Java 21+ (recomendo usar SDKMan para gerenciar vers√µes)
- Maven 3.x+
- PostgreSQL 15+
- IDE (uso IntelliJ IDEA, mas VS Code tamb√©m funciona)

### **Passo a Passo:**

1. **Clone o reposit√≥rio:**
   ```bash
   git clone https://github.com/andreyrsy/kitchen-flow.git
   cd kitchen-flow
   ```

2. **Configure o banco:**
   - Crie um banco PostgreSQL chamado `db_kitchen`
   - Atualize as credenciais em `application.properties` se necess√°rio

3. **Execute:**
   ```bash
   mvn clean install
   mvn spring-boot:run
   ```

4. **Teste a API:**
   - Acesse `http://localhost:8080/api/v1/`
   - Use Postman ou Insomnia para testar os endpoints

---

## üìñ **API Endpoints**

### **üè∑Ô∏è Categorias** (`/api/v1/categoria`)
| M√©todo | Endpoint | Descri√ß√£o |
|--------|----------|-----------|
| `POST` | `/api/v1/categoria` | Criar categoria |
| `GET` | `/api/v1/categoria` | Listar categorias |
| `DELETE` | `/api/v1/categoria/delete/{id}` | Deletar categoria |

### **üì¶ Produtos** (`/api/v1/produto`)
| M√©todo | Endpoint | Descri√ß√£o |
|--------|----------|-----------|
| `GET` | `/api/v1/produto` | Listar produtos |
| `POST` | `/api/v1/produto` | Criar produto |
| `DELETE` | `/api/v1/produto/deletar/{id}` | Deletar produto |

### **üìã Lotes** (`/api/v1/lotes`)
| M√©todo | Endpoint | Descri√ß√£o |
|--------|----------|-----------|
| `GET` | `/api/v1/lotes` | Listar lotes |
| `POST` | `/api/v1/lotes` | Criar lote |
| `PUT` | `/api/v1/lotes/{id}/consumir/{qtd}` | Consumir produto |
| `DELETE` | `/api/v1/lotes/deletar/{id}` | Deletar lote |

---

## üí° **Exemplos de Uso**

### **Criar um Produto:**
```bash
POST /api/v1/produto
{
  "nome": "Leite Integral",
  "unidadeMedida": "litros",
  "categoriaId": 1
}
```

### **Criar um Lote:**
```bash
POST /api/v1/lotes
{
  "quantidade": 50,
  "dataValidade": "25-12-2024",
  "dataEntrada": "20-12-2024",
  "produtoId": 1
}
```

### **Consumir Produto:**
```bash
PUT /api/v1/lotes/1/consumir/10
```

---

## üîß **Configura√ß√µes Importantes**

### **Application Properties:**
```properties
# Logs personalizados (minha configura√ß√£o favorita!)
logging.pattern.console=%d{HH:mm} %-5level %F.%M:%L >>> %cyan(%msg%n)

# Banco de dados
spring.datasource.url=jdbc:postgresql://localhost:5432/db_kitchen

# Formata√ß√£o de datas
spring.jackson.date-format=dd-MM-yyyy
spring.jackson.time-zone=America/Sao_Paulo

# Flyway (migra√ß√µes)
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true
```

---

## üéØ **O Que Aprendi Sobre Desenvolvimento**

### **1. Persist√™ncia √© Tudo**
- N√£o desista quando algo n√£o funcionar na primeira tentativa
- Cada erro √© uma oportunidade de aprender algo novo

### **2. Documenta√ß√£o √© Sua Amiga**
- Spring Boot tem documenta√ß√£o excelente
- Quando em d√∫vida, leia a documenta√ß√£o oficial

### **3. Testes S√£o Essenciais**
- Sempre teste suas APIs com Postman/Insomnia
- Um endpoint que funciona no c√≥digo pode falhar na pr√°tica

### **4. Logs Salvam Vidas**
- Implementei logs estruturados e agora debugging √© muito mais f√°cil
- `log.info()`, `log.error()`, `log.debug()` - cada um tem seu prop√≥sito

### **5. Valida√ß√£o Previne Problemas**
- Valide dados na entrada, n√£o na sa√≠da
- Bean Validation √© mais poderoso do que parece

---

## üîÆ **Pr√≥ximos Passos (Minha Roadmap)**

### **Curto Prazo:**
- [ ] Implementar testes unit√°rios (ainda n√£o sei como fazer direito)
- [ ] Adicionar Swagger/OpenAPI para documenta√ß√£o interativa
- [ ] Melhorar tratamento de exce√ß√µes espec√≠ficas

### **M√©dio Prazo:**
- [ ] Implementar autentica√ß√£o com Spring Security
- [ ] Adicionar cache para consultas frequentes
- [ ] Implementar pagina√ß√£o nas listagens

### **Longo Prazo:**
- [ ] Containerizar com Docker
- [ ] Implementar CI/CD com GitHub Actions
- [ ] Criar frontend em React para consumir a API

---

## üìä **Estat√≠sticas do Projeto**

- **Linhas de C√≥digo:** ~800 linhas
- **Tempo de Desenvolvimento:** 2 meses (com muito estudo paralelo)
- **Commits:** 47 commits (cada um representando uma pequena vit√≥ria!)
- **Bugs Corrigidos:** Incont√°veis (mas cada um me ensinou algo)

---

## üéâ **Conclus√£o**

Este projeto representa muito mais que c√≥digo - representa minha evolu√ß√£o como desenvolvedor. Cada erro, cada d√∫vida, cada linha de c√≥digo escrita foi um passo em dire√ß√£o ao meu objetivo: **conseguir um est√°gio em desenvolvimento**.

Se voc√™ est√° come√ßando como eu estava, meu conselho √©: **n√£o tenha medo de errar**. Cada erro √© uma li√ß√£o. Cada d√∫vida √© uma oportunidade de crescer. E cada linha de c√≥digo √© um passo em dire√ß√£o ao seu objetivo.

O Spring Boot pode parecer complexo no in√≠cio, mas com persist√™ncia e pr√°tica, voc√™ consegue dominar. Eu consegui, e voc√™ tamb√©m consegue!

---

## üë®‚Äçüíª **Sobre Mim**

**Andreyrsy** - Desenvolvedor Java em forma√ß√£o

- üíº **LinkedIn:** [andreyrsy](https://linkedin.com/in/andreyrsy)
- üêô **GitHub:** [andreyrsy](https://github.com/andreyrsy)
- üìß **Email:** [seu-email@exemplo.com]

*"Cada linha de c√≥digo √© um passo em dire√ß√£o ao meu sonho de trabalhar com tecnologia."*

---

## üìÑ **Licen√ßa**

Este projeto est√° sob a licen√ßa MIT. Sinta-se livre para usar, modificar e distribuir!

---

*Desenvolvido com ‚ù§Ô∏è, muito ‚òï e algumas üòÖ durante o processo de aprendizado*